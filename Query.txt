-- Creat tables
CREATE TABLE Users (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    Username VARCHAR (50) NOT NULL,
    Email VARCHAR (100) NOT NULL,
    Password VARCHAR (100) NOT NULL
   );

CREATE TABLE Products (
    ProductID INT AUTO_INCREMENT PRIMARY KEY,
    ProductName VARCHAR (100) NOT NULL ,
    Price DECIMAL (10,2) NOT NULL,
    Stock INT NOT NULL
    );

CREATE TABLE Purchases (
    PurchaseID INT AUTO_INCREMENT PRIMARY KEY,
    UserID INT ,
    ProductID INT ,
    PurchaseData DATETIME DEFAULT CURRENT_TIMESTAMP,
    Quantity INT NOT NULL,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
    );

CREATE TABLE Coupons (
    CouponID INT AUTO_INCREMENT PRIMARY KEY,
    Code VARCHAR (50) NOT NULL ,
    Discount DECIMAL (5 , 2) NOT NULL,
    ExpiryDate DATE NOT NULL 
    );

-- insert datas
INSERT INTO Users (Username , Email , Password) VALUES
('Ali' , 'Ali@gmail.com' , 'ali8181') ,
('Hasan' , 'hasan@gmail.com' , 'hasan7171');

INSERT INTO Products (ProductName , Price , Stock) VALUES
('Apple' , 10.00 , 100) ,
('Banana' , 20.00 , 50) ;

INSERT INTO Purchases (UserID , ProductID , Quantity) VALUES
(1 , 1 , 2) ,
(2 , 2 , 1) ;

INSERT INTO Coupons (Code , Discount , ExpiryDate) VALUES
('c1_5' , 5.00 , '2023-12-31') ,
('c2_10' , 10.00 , '2024-12-21');

